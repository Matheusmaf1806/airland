<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Detalhes do Hotel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Font Awesome e Leaflet CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
  <!-- Flatpickr CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

  <!-- CSS do Carrinho -->
  <link rel="stylesheet" href="css/cart.css">
  
  <!-- Script extra (ex.: facilitiesMap.js) -->
  <script src="/js/facilitiesMap.js"></script>
  
  <!-- Carrega o Web Component do Carrinho -->
  <script src="/js/cart-component.js" defer></script>

  <style>
    /* RESET e estilos básicos para hoteldetails */
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }
    body { background-color: #f0f2f5; color: #333; line-height: 1.6; }
    .main-container { padding: 20px; max-width: 1200px; margin: 0 auto; }
    
    /* Cabeçalho do Hotel */
    .hotel-header { margin-bottom: 20px; }
    .hotel-name { font-size: 2em; font-weight: bold; color: #333; }
    .hotel-address { display: flex; align-items: center; font-size: 1em; color: #666; margin-top: 10px; }
    .hotel-address i { color: #0071e3; margin-right: 10px; }
    .location-link { color: #0071e3; text-decoration: none; margin-left: 10px; font-weight: bold; cursor: pointer; }
    .location-link:hover { text-decoration: underline; color: #005bb5; }
    
    /* Galeria de Fotos */
    .photo-gallery { display: grid; grid-template-columns: 2fr 1fr 1fr; grid-template-rows: repeat(2, 200px); gap: 10px; margin-bottom: 20px; }
    .photo-gallery img { width: 100%; height: 100%; object-fit: cover; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    .photo-gallery .large-photo { grid-row: 1 / 3; }
    
    /* Comodidades */
    .facilities { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px; margin-top: 20px; background-color: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
    .facility { display: flex; align-items: center; justify-content: center; padding: 15px; background-color: #fff; border-radius: 10px; border: 1px solid #ddd; text-align: center; transition: box-shadow 0.3s; }
    .facility i { font-size: 1.5em; color: #0071e3; margin-right: 10px; }
    .facility:hover { box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
    
    /* Descrição e Destaques */
    .description-container { display: flex; gap: 20px; margin-top: 20px; }
    .description { flex: 2; padding: 20px; border-right: 1px solid #e0e0e0; }
    .highlights { flex: 1; padding: 20px; background-color: #e9f7fe; border-radius: 8px; border: 2px solid #007bff; }
    .highlights h2 { font-size: 1.8em; color: #007bff; margin-bottom: 10px; text-align: center; font-weight: bold; }
    .highlights h3 { margin: 15px 0; color: #343a40; }
    .highlight-list { list-style: none; padding: 0; margin-bottom: 20px; }
    .highlight-list li { margin-bottom: 8px; padding-left: 30px; position: relative; color: #555; font-size: 1.1em; }
    .highlight-list li i { position: absolute; left: 0; color: #007bff; font-size: 1.2em; }
    
    /* Barra de Busca */
    .search-bar-container { display: flex; align-items: center; gap: 15px; background-color: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin-top: 20px; }
    .search-fields { display: flex; align-items: center; gap: 15px; flex: 1; }
    .input-group { display: flex; flex-direction: column; gap: 5px; flex: 1; }
    .input-group label { font-size: 12px; color: #555; margin-left: 5px; }
    input[type="text"], input[type="number"], select { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 8px; font-size: 16px; color: #333; }
    .search-button { background-color: #0071e3; color: #fff; border: none; padding: 15px 30px; border-radius: 8px; cursor: pointer; transition: background-color 0.3s ease; flex-shrink: 0; height: 56px; font-size: 16px; }
    .search-button:hover { background-color: #005bb5; }
    
    /* Tabela de Quartos */
    .room-table { width: 100%; margin-top: 20px; background-color: #fff; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); overflow: hidden; }
    .room-table-header { display: grid; grid-template-columns: 3fr 1fr 2fr 1fr; background-color: #0071e3; padding: 15px; font-weight: bold; color: #fff; text-align: center; }
    .room-group-title { grid-column: 1 / 5; background-color: #f5f7ff; font-weight: 700; font-size: 1.1em; padding: 10px; border-bottom: 1px solid #ddd; }
    .room-table-row { display: grid; grid-template-columns: 3fr 1fr 2fr 1fr; padding: 15px; align-items: center; border-bottom: 1px solid #ddd; }
    .room-info { display: flex; gap: 15px; align-items: center; }
    .room-image { width: 150px; height: 100px; border-radius: 10px; object-fit: cover; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    .room-details { display: flex; flex-direction: column; }
    .room-details h4 { margin-bottom: 10px; font-size: 1em; color: #0071e3; }
    .room-details p { margin: 5px 0; color: #666; }
    .room-price { font-size: 0.8em; font-weight: bold; color: rgb(20, 144, 88); text-align: center; }
    .price-info { text-align: center; font-size: 0.8em; color: #666; }
    .discount-price { font-size: 1.3em; font-weight: bold; color: #0071e3; margin: 0; padding: 0; }
    .installment-info { font-size: 1.1rem; color: #666; }
    .select-room-button { background-color: #0071e3; color: #fff; padding: 10px 20px; border-radius: 5px; text-align: center; cursor: pointer; transition: background-color 0.3s; font-size: 1em; border: none; }
    .select-room-button:hover { background-color: #005bb5; }
    
    /* Informações Adicionais */
    .info-container { margin-top: 20px; display: flex; justify-content: space-between; flex-wrap: wrap; }
    .info-block { flex: 1; min-width: 230px; margin: 10px; padding: 20px; background-color: #ffffff; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); transition: transform 0.3s; }
    .info-block h3 { font-size: 1.2em; color: #0071e3; font-weight: 600; }
    .info-block p { font-size: 1em; color: #555; }
    
    /* Mapa e Atrações */
    .container { display: flex; width: 100%; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); border-radius: 10px; background-color: #fff; margin-top: 20px; }
    .attractions { width: 35%; padding: 15px; max-height: 400px; overflow-y: auto; background-color: #fff; border: 1px solid #f2f2f2; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-right: 20px; display: flex; flex-direction: column; }
    #map { height: 400px; width: 65%; }
    .attraction-item { display: flex; align-items: center; margin-bottom: 15px; padding: 10px; background-color: #f9f9f9; border: 1px solid #ddd; border-radius: 5px; transition: background-color 0.3s; font-size: 16px; width: 100%; }
    .attraction-item:hover { background-color: #e0f7fa; }
    .attraction-item i { margin-right: 10px; color: #007AFF; font-size: 20px; }
    h2 { text-align: center; color: #333; margin-bottom: 20px; }
    footer { text-align: center; margin-top: 20px; color: #666; }
  </style>
</head>
<body>
  <!-- HEADER: Carregado via fetch -->
  <div id="header"></div>

  <!-- CARRINHO: Web Component (múltiplos itens via addItem()) -->
  <shopping-cart 
    type="HOSPEDAGEM" 
    category="Hospedagem" 
    nameDays="Quarto e Hotel" 
    date="2025-04-12"
    basePriceAdult="80"
    basePriceChild="60">
  </shopping-cart>

  <!-- CONTEÚDO PRINCIPAL DO HOTEL DETAILS -->
  <div class="main-container" id="hotelDetail">
    <!-- Cabeçalho do Hotel -->
    <div class="hotel-header">
      <div class="hotel-name" id="hotelName"></div>
      <div class="hotel-address" id="hotelAddress"></div>
    </div>

    <!-- Galeria de Fotos -->
    <div class="photo-gallery" id="photoGallery"></div>

    <!-- Seção de Comodidades -->
    <section class="facilities" id="facilities"></section>

    <!-- Descrição e Destaques -->
    <div class="description-container">
      <div class="description" id="hotelDescription"></div>
      <div class="highlights" id="hotelHighlights"></div>
    </div>

    <!-- Barra de Busca -->
    <div class="search-bar-container" id="searchBar">
      <div class="search-fields">
        <div class="input-group">
          <label for="checkin-checkout">Datas</label>
          <!-- Usaremos Flatpickr para seleção de intervalo -->
          <input type="text" id="checkin-checkout" placeholder="Selecione o período">
        </div>
        <div class="input-group">
          <label for="rooms">Quartos</label>
          <input type="number" id="rooms" placeholder="Nº de Quartos" min="1" max="10" value="1">
        </div>
        <div class="input-group">
          <label for="adults">Adultos (+18 Anos)</label>
          <input type="number" id="adults" placeholder="Nº de Adultos" min="1" max="10" value="1">
        </div>
        <div class="input-group">
          <label for="children">Crianças (0 a 17 anos)</label>
          <input type="number" id="children" placeholder="Nº de Crianças" min="0" max="10" value="0">
        </div>
      </div>
      <button class="search-button" onclick="updateRoomList()">Pesquisar</button>
    </div>

    <!-- Tabela de Quartos -->
    <section class="room-table" id="roomTable">
      <div class="room-table-header">
        <div>Tipo de Quarto</div>
        <div>Hóspedes</div>
        <div>Preço para <span id="num-noites">0</span> Noites</div>
        <div></div>
      </div>
      <div class="room-table-body" id="roomTableBody"></div>
    </section>

    <!-- Informações Adicionais -->
    <div class="info-container" id="infoContainer"></div>

    <!-- Mapa e Atrações -->
    <div class="container" id="mapAttractionsContainer">
      <div class="attractions" id="attractions">
        <h2>Atrações</h2>
      </div>
      <div id="map"></div>
    </div>
  </div>

  <!-- SCRIPTS EXTERNOS -->
  <!-- Inclui jQuery e Moment.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
  <!-- Inclui Flatpickr (em vez do daterangepicker) -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <!-- Inclui Leaflet -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <!-- SCRIPT PRINCIPAL UNIFICADO -->
  <script>
(function() {
  // Evita reinicialização se já tiver sido rodado
  if (window.__hotelDetailJSInitialized) return;
  window.__hotelDetailJSInitialized = true;

  /********** 1. Carregar header via fetch (opcional) **********/
  fetch("header.html")
    .then(resp => resp.text())
    .then(html => {
      const headerEl = document.getElementById("header");
      if (headerEl) headerEl.innerHTML = html;
    })
    .catch(err => console.error("Erro ao carregar header:", err));

  /********** 2. Função para abrir o carrinho **********/
  window.toggleCart = function() {
    const cartComponent = document.querySelector("shopping-cart");
    if (cartComponent && typeof cartComponent.openCart === "function") {
      cartComponent.openCart();
    } else {
      console.error("Componente <shopping-cart> não encontrado ou openCart() não definido.");
    }
  };

  /********** 3. Inicializa o Flatpickr **********/
  function initDateRangePicker() {
    if (typeof flatpickr !== "function") {
      console.error("Flatpickr não está disponível! Verifique se a biblioteca foi carregada.");
      return;
    }
    flatpickr("#checkin-checkout", {
      mode: "range",
      dateFormat: "d/m/Y",
      rangeSeparator: " - "
      // Não chamamos a busca automaticamente aqui.
    });
  }

  /********** 4. Ler datas do input (Flatpickr) **********/
  function getDatesFromInput() {
    const dateRange = document.getElementById("checkin-checkout").value || "";
    let checkIn = "", checkOut = "";
    if (dateRange.includes(" - ")) {
      const [startStr, endStr] = dateRange.split(" - ");
      checkIn  = moment(startStr, "DD/MM/YYYY").format("YYYY-MM-DD");
      checkOut = moment(endStr,   "DD/MM/YYYY").format("YYYY-MM-DD");
    }
    return { checkIn, checkOut };
  }

  /********** 5. Buscar dados do hotel (API) **********/
  function fetchHotelCombined() {
    // Lê datas do campo, não da URL (após o usuário clicar em "Pesquisar").
    const { checkIn, checkOut } = getDatesFromInput();

    const rooms    = document.getElementById("rooms").value     || "1";
    const adults   = document.getElementById("adults").value    || "1";
    const children = document.getElementById("children").value  || "0";

    // Pegamos o hotelCode da URL (se for necessário).
    const urlParams = new URLSearchParams(window.location.search);
    const hotelCode = urlParams.get("hotelCode") || "";

    // Monta os parâmetros
    const params = new URLSearchParams();
    if (checkIn)  params.set("checkIn", checkIn);
    if (checkOut) params.set("checkOut", checkOut);
    params.set("rooms", rooms);
    params.set("adults1", adults);
    params.set("children1", children);
    if (hotelCode) params.set("hotelCode", hotelCode);

    console.log("Enviando param:", params.toString());

    return fetch("/api/hbdetail/hotels?" + params.toString())
      .then(resp => resp.json());
  }

  /********** 6. Carregar/Exibir dados do hotel na página **********/
  function loadHotelContent(hotelObj) {
    if (!hotelObj) return;
    const hotelName = hotelObj.name || "Hotel sem nome";
    const hotelCode = hotelObj.code;
    const hotelAddress = hotelObj.destinationName || "";
    
    // Exibe nome e endereço
    document.getElementById("hotelName").textContent = hotelName;
    document.getElementById("hotelAddress").innerHTML = `
      <i class="fas fa-map-marker-alt"></i> ${hotelAddress}
      <a href="#" class="location-link" onclick="toggleCart()">Abrir Carrinho</a>
    `;

    // Galeria de fotos
    fillPhotoGallery(hotelObj);

    // Facilidades
    fillFacilities(hotelObj);

    // Descrição
    document.getElementById("hotelDescription").innerHTML =
      (hotelObj.content?.description) || "Sem descrição";

    // Destaques (fixo ou algo do hotelObj)
    document.getElementById("hotelHighlights").innerHTML = `
      <h2>Destaques da Acomodação</h2>
      <p>Confira as melhores vantagens desta acomodação.</p>
    `;

    // Tabela de quartos
    createRoomTableGrouped(hotelObj);

    // Blocos de info
    fillInfoBlocks({
      checkin: "A partir das 16h",
      checkout: "Até 11:00",
      resortFee: "Não possui no local.",
      parking: "Consulte valores no local."
    });

    // Mapa e atrações
    const lat = hotelObj.latitude  || 0;
    const lng = hotelObj.longitude || 0;
    initMapAndAttractions(lat, lng, hotelObj.content?.interestPoints || []);
  }

  /********** 7. Preenche galeria de fotos **********/
  function fillPhotoGallery(hotelObj) {
    const gallery = document.getElementById("photoGallery");
    gallery.innerHTML = "";
    if (!hotelObj.content?.images?.length) return;
    const images = hotelObj.content.images.map(img => "https://photos.hotelbeds.com/giata/xl/" + img.path);
    
    // Imagem principal
    const largeImg = document.createElement("img");
    largeImg.src = images[0];
    largeImg.alt = "Foto do Hotel";
    largeImg.classList.add("large-photo");
    gallery.appendChild(largeImg);

    // Demais imagens
    for (let i = 1; i < images.length && i < 5; i++) {
      const img = document.createElement("img");
      img.src = images[i];
      img.alt = "Foto do Hotel";
      gallery.appendChild(img);
    }
  }

  /********** 8. Preenche facilidades **********/
  function fillFacilities(hotelObj) {
    const container = document.getElementById("facilities");
    container.innerHTML = "";
    if (!hotelObj.content?.facilities?.length) return;
    hotelObj.content.facilities.slice(0, 12).forEach(f => {
      container.innerHTML += `<div class="facility"><i class="fas fa-check"></i> ${f}</div>`;
    });
  }

  /********** 9. Cria tabela de quartos agrupados **********/
  function createRoomTableGrouped(hotelObj) {
    const tableBody = document.getElementById("roomTableBody");
    tableBody.innerHTML = "";
    if (!hotelObj.rooms?.length) return;

    // Ordena
    const sorted = hotelObj.rooms.slice().sort((a, b) => {
      const netA = parseFloat(a.rates?.[0]?.net) || Infinity;
      const netB = parseFloat(b.rates?.[0]?.net) || Infinity;
      return netA - netB;
    });

    const initialCount = 6;
    sorted.slice(0, initialCount).forEach(r => {
      tableBody.appendChild(createRoomRow(r, hotelObj.code, hotelObj.name));
    });

    if (sorted.length > initialCount) {
      const moreBtn = document.createElement("button");
      moreBtn.textContent = "Mostrar mais quartos";
      moreBtn.className = "select-room-button";
      moreBtn.onclick = () => {
        moreBtn.remove();
        sorted.slice(initialCount).forEach(r => {
          tableBody.appendChild(createRoomRow(r, hotelObj.code, hotelObj.name));
        });
      };
      const btnRow = document.createElement("div");
      btnRow.className = "room-table-row";
      btnRow.style.justifyContent = "center";
      btnRow.appendChild(moreBtn);
      tableBody.appendChild(btnRow);
    }
  }

  /********** 10. Cria uma row de quarto **********/
  function createRoomRow(room, hotelCode, hotelName) {
    const row = document.createElement("div");
    row.className = "room-table-row";

    const roomName = room.name || room.roomType || room.roomCode || "Quarto";
    const netVal   = parseFloat(room.rates?.[0]?.net) || 80;
    const netStr   = netVal.toFixed(2);
    const discount = (netVal * 0.05).toFixed(2);

    row.innerHTML = `
      <div class="room-info">
        <div class="room-details">
          <h4>${roomName}</h4>
        </div>
      </div>
      <div class="room-guests">${room.maxPax || 2} Hóspedes</div>
      <div class="room-price" data-price="${netVal}">
        <p class="discount-price">
          R$ <span class="pix-price">${netStr}</span>
        </p>
        <p class="installment-info">até 10x sem juros</p>
        <span class="flag-offer">Economize R$${discount} no Pix</span>
      </div>
      <div>
        <button class="select-room-button"
          onclick="handleSelectRoom('${hotelCode}','${hotelName}','${room.code}','${room.name}','${netVal}','60')">
          Selecionar Quarto
        </button>
      </div>
    `;
    return row;
  }

  /********** 11. Preenche info blocks (checkin, checkout, etc.) **********/
  function fillInfoBlocks(info) {
    const container = document.getElementById("infoContainer");
    container.innerHTML = "";
    const items = [
      { title: "Horário de Check-in", icon: "fas fa-clock", content: info.checkin },
      { title: "Horário de Check-out", icon: "fas fa-clock", content: info.checkout },
      { title: "Resort Fee", icon: "fas fa-info-circle", content: info.resortFee },
      { title: "Estacionamento", icon: "fas fa-car", content: info.parking }
    ];
    items.forEach(it => {
      const block = document.createElement("div");
      block.className = "info-block";
      block.innerHTML = `
        <h3><i class="${it.icon}" style="margin-right: 8px;"></i> ${it.title}</h3>
        <p>${it.content}</p>
      `;
      container.appendChild(block);
    });
  }

  /********** 12. Inicializa mapa e atrações **********/
  function initMapAndAttractions(lat, lng, attractions) {
    const map = L.map("map").setView([lat, lng], 14);
    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      maxZoom: 19,
      attribution: "&copy; OpenStreetMap contributors"
    }).addTo(map);

    const hotelIcon = L.icon({
      iconUrl: "https://produtos.magictraveltur.com/wp-content/uploads/2024/10/Hotel-icon.png",
      iconSize: [40, 40],
      iconAnchor: [20, 40],
      popupAnchor: [0, -30]
    });
    const marker = L.marker([lat, lng], { icon: hotelIcon }).addTo(map);
    marker.bindPopup(`<b>${document.getElementById("hotelName").textContent}</b>`);

    const container = document.getElementById("attractions");
    container.innerHTML = "<h2>Atrações</h2>";
    attractions.forEach(a => {
      const latA = a.latitude || lat;
      const lngA = a.longitude || lng;
      const attrMarker = L.marker([latA, lngA]).addTo(map);
      attrMarker.bindPopup(`<b>${a.poiName || a.name}</b> - ${a.distance}`);
      container.innerHTML += `
        <div class="attraction-item">
          <i class="fas fa-map-marker-alt"></i> ${a.poiName || a.name} - ${a.distance}
        </div>
      `;
    });
  }

  /********** 13. handleSelectRoom: envia quarto ao carrinho, usando datas do input **********/
  window.handleSelectRoom = function(hCode, hName, rCode, rName, basePriceAdult, basePriceChild) {
    const dateRange = document.getElementById("checkin-checkout").value;
    let checkIn = "", checkOut = "";
    if (dateRange.includes(" - ")) {
      const [startStr, endStr] = dateRange.split(" - ");
      checkIn  = moment(startStr, "DD/MM/YYYY").format("YYYY-MM-DD");
      checkOut = moment(endStr,   "DD/MM/YYYY").format("YYYY-MM-DD");
    }
    const rooms    = document.getElementById("rooms").value     || "1";
    const adults   = document.getElementById("adults").value    || "1";
    const children = document.getElementById("children").value  || "0";

    const selectedRoom = {
      type: "HOSPEDAGEM",
      hotelCode: hCode,
      hotelName: hName,
      roomCode: rCode,
      roomName: rName,
      rooms,
      adults,
      children,
      checkIn,
      checkOut,
      basePriceAdult: parseFloat(basePriceAdult) || 80,
      basePriceChild: parseFloat(basePriceChild) || 60
    };

    const cart = document.querySelector("shopping-cart");
    if (cart && typeof cart.addItem === "function") {
      cart.addItem(selectedRoom);
      cart.openCart();
    }
  };

  /********** 14. Inicialização DOMContentLoaded **********/
  document.addEventListener("DOMContentLoaded", function() {
    // Inicializa Flatpickr (sem disparar busca)
    if (typeof flatpickr === "function") {
      flatpickr("#checkin-checkout", {
        mode: "range",
        dateFormat: "d/m/Y",
        rangeSeparator: " - "
      });
    }

    // Se quiser uma busca inicial com base na URL (opcional):
    const urlParams = new URLSearchParams(window.location.search);
    const checkInUrl  = urlParams.get("checkIn");
    const checkOutUrl = urlParams.get("checkOut");
    if (checkInUrl && checkOutUrl) {
      // Converte p/ exibir no input
      const inputEl = document.getElementById("checkin-checkout");
      const d1 = moment(checkInUrl,  "YYYY-MM-DD").format("DD/MM/YYYY");
      const d2 = moment(checkOutUrl, "YYYY-MM-DD").format("DD/MM/YYYY");
      inputEl.value = d1 + " - " + d2;

      // Calcula noites (opcional)
      const diff = moment(checkOutUrl).diff(moment(checkInUrl), "days");
      document.getElementById("num-noites").textContent = diff > 0 ? diff : 1;
    }
    if (urlParams.get("rooms"))    document.getElementById("rooms").value    = urlParams.get("rooms");
    if (urlParams.get("adults"))   document.getElementById("adults").value   = urlParams.get("adults");
    if (urlParams.get("children")) document.getElementById("children").value = urlParams.get("children");

    // Carrega dados iniciais (usando as datas da URL, se houver)
    // Se não quiser busca inicial automática, remova este bloco.
    fetchHotelCombined().then(data => {
      if (data?.combined?.length) {
        loadHotelContent(data.combined[0]);
      } else {
        console.error("Nenhum resultado inicial encontrado!");
      }
    });

    // Botão "Pesquisar": refaz a busca usando SOMENTE datas do input
    const searchBtn = document.querySelector(".search-button");
    if (searchBtn) {
      searchBtn.addEventListener("click", function() {
        fetchHotelCombined().then(data => {
          if (data?.combined?.length) {
            loadHotelContent(data.combined[0]);
          } else {
            console.warn("Nenhum resultado para a pesquisa!");
          }
        });
      });
    }
  });
})();
</script>
</body>
</html>
